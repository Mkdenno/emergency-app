{"ast":null,"code":"import _defineProperty from\"/home/moringa/emergencyApp/emergencyclient/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/moringa/emergencyApp/emergencyclient/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/moringa/emergencyApp/emergencyclient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Url=\"https://emergencybackend.herokuapp.com\";var Login=function Login(){// const [userName, setUserName] = useState(\"\");\n// const [email, setEmail] = useState(\"\");\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState({email:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),submittedData=_useState4[0],setSubmittedData=_useState4[1];var handleEmail=function handleEmail(event){setSubmittedData(_objectSpread(_objectSpread({},submittedData),{},_defineProperty({},event.target.name,event.target.value)));};var handlePassword=function handlePassword(event){setSubmittedData(_objectSpread(_objectSpread({},submittedData),{},_defineProperty({},event.target.name,event.target.value)));};var handleSubmit=function handleSubmit(event){event.preventDefault();var inputData={email:submittedData.email,password:submittedData.password};// fetch(\"http://localhost:9292/userlogin\")\n// console.log(submittedData);\nfetch(\"\".concat(Url,\"/userlogin\"),{method:\"POST\",headers:{\"content-Type\":\"application/json\"},body:JSON.stringify(inputData)}).then(function(res){return res.json();}).then(function(data){return setUserData(data);});// window.location.reload()\n// window.localStorage.setMessage(\"token\", data.message.token);\n//     history.push(\"/\");\n};if(userData.message===\"login success\"){var id=userData.user.id;var username=userData.user.username;var role=userData.user.role;window.location=\"/\".concat(id,\"/\").concat(username,\"/\").concat(role);}return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"loginHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"error\",children:[\" \",userData.message,\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,name:\"email\",placeholder:\"Enter your Email\",onChange:handleEmail,value:submittedData.email}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,name:\"password\",placeholder:\"Enter your Password\",onChange:handlePassword,value:submittedData.password}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"loginlinks\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"lastp\",children:[\"Click \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsx(\"span\",{className:\"click-here\",children:\"here\"})}),\" to Register\"]})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","Link","Url","Login","userData","setUserData","email","password","submittedData","setSubmittedData","handleEmail","event","target","name","value","handlePassword","handleSubmit","preventDefault","inputData","fetch","method","headers","body","JSON","stringify","then","res","json","data","message","id","user","username","role","window","location"],"sources":["/home/moringa/emergencyApp/emergencyclient/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Url =\"https://emergencybackend.herokuapp.com\"\n\n\nconst Login = () => {\n\n  // const [userName, setUserName] = useState(\"\");\n  // const [email, setEmail] = useState(\"\");\n  const [userData, setUserData] = useState(\"\");\n  const [submittedData, setSubmittedData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleEmail = (event) => {\n    setSubmittedData({\n      ...submittedData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handlePassword = (event) => {\n    setSubmittedData({\n      ...submittedData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const inputData = {\n      email: submittedData.email,\n      password: submittedData.password,\n    };\n    // fetch(\"http://localhost:9292/userlogin\")\n\n    // console.log(submittedData);\n    fetch(`${Url}/userlogin`, {\n      method: \"POST\",\n      headers: {\n        \"content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(inputData),\n    })\n      .then((res) => res.json())\n      .then((data) => setUserData(data));\n    // window.location.reload()\n    // window.localStorage.setMessage(\"token\", data.message.token);\n    //     history.push(\"/\");\n  };\n\n  if (userData.message === \"login success\") {\n    const id = userData.user.id;\n    const username = userData.user.username;\n    const role = userData.user.role;\n      \n    window.location = `/${id}/${username}/${role}`;\n  }\n\n\n  return (\n    <div className=\"login-container\">\n\n      <form className=\"login\" onSubmit={handleSubmit}>\n      <div className=\"loginHeader\">\n      <h2>Login</h2>\n      </div>\n        <h2 className=\"error\"> {userData.message} </h2>\n\n        <input\n          type=\"email\"\n          required\n          name=\"email\"\n          placeholder=\"Enter your Email\"\n          onChange={handleEmail}\n          value={submittedData.email}\n        />\n        <br />\n        <input\n          type=\"password\"\n          required\n          name=\"password\"\n          placeholder=\"Enter your Password\"\n          onChange={handlePassword}\n          value={submittedData.password}\n        />\n        <br />\n        {/* <button type=\"submit\">Login</button> */}\n        <div className=\"loginlinks\">\n        <button className=\"login-btn\">Login</button>\n        <p className=\"lastp\">Click <Link to=\"/register\"><span className=\"click-here\">here</span></Link> to Register</p>\n        </div>\n\n                  {/* <button><Link to=\"/login\">Register</Link></button> */}\n\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}